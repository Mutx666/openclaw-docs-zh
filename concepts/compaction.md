# 上下文压缩 (Compaction)

每个模型都有其上下文窗口（Context Window），即它一次能“记住”的最大 Token 数量。随着聊天和工具执行结果的增加，窗口会变得拥挤。此时，OpenClaw 会对旧历史进行压缩。

## 什么是压缩？
压缩会将较早的对话内容浓缩成一条摘要条目，同时保留最近的消息。摘要会保存在 JSONL 格式的会话历史中。这意味着未来的请求将基于：
1. **压缩摘要** (历史概括)
2. **压缩点之后的近期消息** (完整细节)

## 自动压缩 (默认开启)
当会话接近窗口上限时，OpenClaw 会自动触发压缩，并可能使用压缩后的上下文重新尝试当前的请求。
- 在详细模式下，你会看到：`🧹 Auto-compaction complete`。
- 运行 `/status` 可以查看当前的压缩次数。

## 手动压缩
你可以随时运行 `/compact` 命令（支持自定义侧重点）来强制执行一次压缩：
- `/compact 重点保留已达成的决定和未解决的问题`

## 压缩 vs 剪裁 (Pruning)
- **压缩 (Compaction)**：进行摘要总结，并持久化到磁盘。
- **剪裁 (Pruning)**：仅针对内存中的旧工具执行结果进行修剪，不影响磁盘历史。

## 小贴士
- 当你觉得 Agent 开始“忘事”或者响应变慢时，可以手动执行 `/compact`。
- 如果想彻底重新开始，请使用 `/new` 或 `/reset`。
