# 内存与长期记忆 (Memory)

OpenClaw 的记忆本质上是工作空间中的纯文本 Markdown 文件。模型只有将信息写入磁盘，才能在未来的会话中“记住”它。

## 记忆分层
默认工作空间采用两层记忆结构：
1. **每日日志 (\`memory/YYYY-MM-DD.md\`)**：记录当天的操作、发现和琐事。Agent 启动时会自动读取今天和昨天的日志。
2. **长期记忆 (\`MEMORY.md\`)**：存放经过整理的决定、偏好和持久性事实。仅在私人主会话中加载。

## 自动内存清理 (Memory Flush)
当会话接近上下文窗口上限（即将触发压缩）时，OpenClaw 会执行一次“静默轮次”，提醒模型将重要的持久性笔记写入磁盘。
- **触发条件**：当前 Token 消耗接近上限时。
- **静默执行**：此过程通常通过 \`NO_REPLY\` 机制对用户不可见。

## 向量搜索 (Vector Search)
OpenClaw 可以对所有 Markdown 记忆文件建立向量索引，支持语义搜索。
- **功能**：即使关键词不完全匹配，模型也能通过 \`memory_search\` 找到相关的历史笔记。
- **供应商**：支持 OpenAI, Gemini 或本地模型（如 Gemma-300M）。
- **混合搜索**：结合了向量相似度（语义）和 BM25 算法（关键词精确匹配）。

## 如何让 Agent 记住事情？
- **直接吩咐**：“请把这个项目的服务器 IP 记入我的长期记忆。”
- **自动触发**：在对话中达成决定时，Agent 应该养成习惯将其写入每日日志。

## 会话记忆 (Experimental)
你可以开启实验性功能，让 OpenClaw 对过去的聊天记录（JSONL 文件）也建立索引，从而实现跨会话的语义检索。
