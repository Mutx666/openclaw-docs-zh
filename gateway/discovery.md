# 发现与传输 (Discovery & Transports)

OpenClaw 解决两个核心的网络连接问题：操作员的远程控制（如 Mac 应用控制远程服务器）以及节点配对（如手机寻找服务器）。

## 连接术语
- **Gateway WS**: 默认运行在 \`127.0.0.1:18789\` 的 WebSocket 接口。
- **直接传输 (Direct WS)**：直接通过局域网或 Tailscale 访问网关，性能最好。
- **SSH 传输**：通用备选方案，通过 SSH 隧道转发本地端口。

## 发现机制 (如何找到网关)

### 1. Bonjour / mDNS (局域网)
网关会在局域网内广播“灯塔”信号。
- **优点**：同网络下自动发现，无需输入 IP。
- **标识**：\`_openclaw-gw._tcp\`。

### 2. Tailscale (跨网络)
这是远程连接的首选方式。网关会自动检测并在 Tailscale 网络中发布其 MagicDNS 名称。

### 3. 手动 / SSH
当没有直接路由时，客户端总是可以通过 SSH 命令连接：
\`ssh -N -L 18789:127.0.0.1:18789 用户@服务器\`

## 传输选择策略
1. **已配对直连**：如果之前连过且能通，优先使用。
2. **Bonjour 发现**：如果局域网内有信号，弹出“一键连接”提示。
3. **Tailscale**：尝试通过 VPN 网络直连。
4. **SSH 兜底**：如果上述方式都失败，回退到 SSH。

## 组件职责
- **网关 (Gateway)**：发布信号，负责审批配对申请。
- **桌面 App**：帮助用户发现网关并显示配对提示。
- **iOS/Android 节点**：自动扫描信号并连接到已授权的网关。
