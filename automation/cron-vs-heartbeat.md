# Cron vs Heartbeat: 我该选哪个？

Heartbeat (心跳) 和 Cron (定时任务) 都能让你按计划运行任务。本指南将帮助你为自己的用例选择合适的机制。

## 快速决策指南

| 用例 | 推荐机制 | 理由 |
| :--- | :--- | :--- |
| 每 30 分钟检查一次收件箱 | Heartbeat | 可与其他检查合并，具备上下文感知能力 |
| 每天早晨 9 点整发送日报 | Cron (isolated) | 需要精确的时间点 |
| 监控日历中的即将到来的事件 | Heartbeat | 天然适合周期性感知 |
| 运行每周深度分析 | Cron (isolated) | 独立任务，可使用不同的模型 |
| 20 分钟后提醒我 | Cron (main, --at) | 带精确时间的一次性任务 |
| 后台项目健康检查 | Heartbeat | 挂载在现有的心跳周期中 |

## Heartbeat: 周期性感知

心跳在主会话中按固定间隔运行（默认 30 分钟）。它们的设计初衷是让 Agent 主动检查各项事务并反馈重要信息。

### 什么时候使用 Heartbeat？
- **多项周期性检查**：如果你想同时检查邮箱、日历、天气和项目状态，一个 Heartbeat 就能搞定，而不需要开 5 个 Cron。
- **具备上下文感知的决策**：Agent 拥有完整的会话背景，可以智能判断什么是紧急的，什么是可以稍后处理的。
- **对话连续性**：心跳共享同一个会话，Agent 记得之前的聊天内容，跟进起来更自然。

## Cron: 精确调度

Cron 任务在精确的时间点运行，并可以在隔离会话中运行，不干扰主会话。

### 什么时候使用 Cron？
- **精确的时间要求**：比如“每周一早上 9:00 发送”，而不是“9 点左右”。
- **独立任务**：不需要参考之前聊天背景的任务。
- **不同的模型/思考等级**：例如繁重的分析任务，需要调用更强大的模型。
- **一次性提醒**：使用 \`--at\` 设置 20 分钟后的提醒。

## 决策逻辑
1. **需要精确时间吗？** -> 是：Cron
2. **需要与主会话隔离吗？** -> 是：Cron (isolated)
3. **可以和其他检查合并吗？** -> 是：Heartbeat (写入 \`HEARTBEAT.md\`)
4. **需要不同的模型吗？** -> 是：Cron (isolated)
